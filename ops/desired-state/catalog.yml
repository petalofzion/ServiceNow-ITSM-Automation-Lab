catalog:
  items:
    - name: Access Request
      description: Request elevated access to a system.
      variables:
        - name: system
          type: reference
          table: cmdb_ci
        - name: access_level
          type: choice
          choices: [read, write, admin]
      flow_trigger: Access Request Approval
  record_producers:
    - name: Report an Incident
      table: incident
      variables:
        - name: short_description
          type: string
        - name: impact
          type: choice
          choices: [low, medium, high]
  flows:
    - name: Access Request Approval
      trigger:
        type: catalog_item
        catalog_item: Access Request
        condition: "access_level == 'admin'"
      steps:
        - action: approval
          role: x_plego.manager
        - action: task
          assignment_group: Service Desk
